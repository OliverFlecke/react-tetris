(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(e,t,n){e.exports={container:"Board_container__3YjH8",gridContainer:"Board_gridContainer__225vc",visibleCell:"Board_visibleCell__3E3tK",hiddenCell:"Board_hiddenCell__3E4Yq",activeCell:"Board_activeCell__2344E"}},12:function(e,t,n){e.exports=n(23)},21:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var i,r=n(0),a=n.n(r),l=n(11),o=n.n(l),c=n(8),u=n(1),s=n(2),h=n(4),f=n(6),d=n(5),v=n(7),w=function e(t){Object(s.a)(this,e),this.color=void 0,this.orientation=void 0,this.width=0,this.height=0,this.color=t};!function(e){e.Red="red",e.Cyan="cyan",e.Maroon="#AA0000",e.Silver="#C0C0C0",e.Purple="#AA00AA",e.NavyBlue="#0000AA",e.DarkGreen="#00AA00",e.Brown="#AA5500",e.Teal="#00AAAA"}(i||(i={}));var m=i,g=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(f.a)(this,Object(d.a)(t).call(this,m.Silver))).orientation="Right",e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"canMoveDown",value:function(e,t,n){switch(this.orientation){case"Down":if(n+2>e.length)return!1;if(null!==e[n+1][t+1]||null!==e[n][t]||null!==e[n][t-1]||null!==e[n][t+1])return!1;break;case"Left":if(n+3>e.length)return!1;if(null!==e[n+2][t-1]||e[n+2][t])return!1;break;case"Right":if(n+3>e.length)return!1;if(null!==e[n+2][t-1]||null!==e[n][t])return!1;break;case"Up":if(n+2>e.length)return!1;if(null!==e[n+1][t]||null!==e[n+1][t+1]||null!==e[n+1][t-1])return!1;break;default:return!0}return!0}},{key:"storeOnGrid",value:function(e,t,n){var i=e.slice();switch(this.orientation){case"Down":i[n-1][t-1]=this.color,i[n-1][t]=this.color,i[n-1][t+1]=this.color,i[n][t+1]=this.color;break;case"Left":i[n-1][t]=this.color,i[n+1][t]=this.color,i[n][t]=this.color,i[n+1][t-1]=this.color;break;case"Right":i[n-1][t]=this.color,i[n-1][t-1]=this.color,i[n][t-1]=this.color,i[n+1][t-1]=this.color;break;case"Up":i[n][t+1]=this.color,i[n][t]=this.color,i[n][t-1]=this.color,i[n-1][t-1]=this.color}return i}},{key:"checkLeft",value:function(e,t,n){switch(this.orientation){case"Down":return!(null!==e[n-1][t-2]);case"Left":return!(null!==e[n+1][t-2]);case"Up":return!(null!==e[n][t-2]||e[n-1][t-2]);case"Right":return!(null!==e[n][t-2]||null!==e[n-1][t-2]||null!==e[n+1][t-2]);default:return!0}}},{key:"checkRight",value:function(e,t,n){switch(this.orientation){case"Down":return!(t+2>=e[0].length)&&!(null!==e[n][t+2]||e[n-1][t+2]);case"Left":return!(t+1>=e[0].length)&&!(null!==e[n+1][t+1]||null!==e[n][t+1]||null!==e[n-1][t+1]);case"Up":return!(t+2>=e[0].length)&&!(null!==e[n][t+2]);case"Right":return!(t+1>=e[0].length)&&!(null!==e[n-1][t+1]||null!==e[n][t]||null!==e[n+1][t]);default:return!0}}},{key:"rotateClockwise",value:function(e,t,n,i){switch(this.orientation){case"Down":this.orientation="Left";break;case"Left":this.orientation="Up";break;case"Up":this.orientation="Right";break;case"Right":this.orientation="Down"}}},{key:"rotateCounterClockwise",value:function(e,t,n,i){switch(this.orientation){case"Down":this.orientation="Right";break;case"Right":this.orientation="Up";break;case"Up":this.orientation="Left";break;case"Left":this.orientation="Down"}}}]),t}(w),k=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(f.a)(this,Object(d.a)(t).call(this,m.Maroon))).orientation="Horizontal",e.width=4,e.height=1,e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"canMoveDown",value:function(e,t,n){return"Horizontal"===this.orientation?!(n+this.height>e.length)&&[-1,0,1,2].every(function(i){return t+i>=e[0].length||null===e[n][t+i]}):"Vertical"===this.orientation&&(!(n+this.height>=e.length)&&null===e[n+this.height][t-1])}},{key:"storeOnGrid",value:function(e,t,n){var i=this,r=e.slice();return"Horizontal"===this.orientation?[-1,0,1,2].forEach(function(e){return r[n-1][t+e]=i.color}):"Vertical"===this.orientation&&[0,1,2,3].forEach(function(e){return r[n+e][t-1]=i.color}),r}},{key:"checkLeft",value:function(e,t,n){return("Horizontal"!==this.orientation||null===e[n][t-2])&&("Vertical"!==this.orientation||![0,1,2,3].some(function(i){return null!==e[n+i][t-2]}))}},{key:"checkRight",value:function(e,t,n){return("Horizontal"!==this.orientation||null===e[n][t+3])&&("Vertical"!==this.orientation||![0,1,2,3].some(function(i){return null!==e[n+i][t]}))}},{key:"rotateClockwise",value:function(e,t,n){"Vertical"===this.orientation?t+2<e[0].length&&(this.orientation="Horizontal",this.width=4,this.height=1):(this.width=1,this.height=4,this.orientation="Vertical")}},{key:"rotateCounterClockwise",value:function(e,t,n){this.rotateClockwise(e,t,n)}}]),t}(w),y=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(f.a)(this,Object(d.a)(t).call(this,m.NavyBlue))).width=2,e}return Object(v.a)(t,e),Object(h.a)(t,[{key:"canMoveDown",value:function(e,t,n){return!(n+1>=e.length)&&(null===e[n+1][t]&&null===e[n+1][t-1])}},{key:"storeOnGrid",value:function(e,t,n){var i=e.slice();return i[n][t]=this.color,i[n-1][t]=this.color,i[n][t-1]=this.color,i[n-1][t-1]=this.color,i}},{key:"checkLeft",value:function(e,t,n){return null===e[n][t-2]}},{key:"checkRight",value:function(e,t,n){return null===e[n][t+1]}},{key:"rotateClockwise",value:function(){this.orientation=this.orientation}},{key:"rotateCounterClockwise",value:function(){this.orientation=this.orientation}}]),t}(w),b=n(3),C=function(e){return e.piece instanceof y?a.a.createElement(p,e):e.piece instanceof k?a.a.createElement(O,Object.assign({},e,{orientation:e.piece.orientation})):e.piece instanceof g?a.a.createElement(_,Object.assign({},e,{orientation:e.piece.orientation})):null},E=function(e){return{gridColumnStart:e.column,gridRowStart:e.row}},p=function(e){return a.a.createElement("div",{className:b.OPiece,style:E(e)},new Array(4).fill(null).map(function(e,t){return a.a.createElement("div",{key:t,className:u.activeCell})}))},O=function(e){return a.a.createElement("div",{className:"Horizontal"===e.orientation?b.IPieceHorizontal:b.IPieceVertical,style:E(e)},new Array(4).fill(null).map(function(e,t){return a.a.createElement("div",{key:t,className:u.activeCell})}))},_=function(e){switch(e.orientation){case"Down":return a.a.createElement("div",{className:b.JPieceHorizontal,style:E(e)},new Array(3).fill(null).map(function(e,t){return a.a.createElement("div",{key:t,className:u.activeCell})}),a.a.createElement("div",{className:u.activeCell,style:{gridColumn:3}}));case"Left":return a.a.createElement("div",{className:b.JPieceVertical,style:E(e)},a.a.createElement("div",{className:u.activeCell,style:{gridColumn:1,gridRow:3}}),new Array(3).fill(null).map(function(e,t){return a.a.createElement("div",{key:t,className:u.activeCell,style:{gridColumn:2}})}));case"Up":return a.a.createElement("div",{className:b.JPieceHorizontal,style:E(e)},a.a.createElement("div",{className:u.activeCell,style:{gridColumn:1,gridRow:1}}),new Array(3).fill(null).map(function(e,t){return a.a.createElement("div",{key:t,className:u.activeCell,style:{gridRow:2}})}));case"Right":return a.a.createElement("div",{className:b.JPieceVertical,style:E(e)},new Array(3).fill(null).map(function(e,t){return a.a.createElement("div",{key:t,className:u.activeCell,style:{gridColumn:1}})}),a.a.createElement("div",{className:u.activeCell,style:{gridColumn:2,gridRow:1}}));default:throw new Error("Unsupported orientation for JPiece")}},j=function(e){return a.a.createElement("div",{className:u.gridContainer},e.grid.map(function(t,n){return t.map(function(t,i){var r=e.grid[n][i];return a.a.createElement("div",{key:"".concat(n," ").concat(i),className:u.visibleCell,style:{backgroundColor:r||"#555",borderColor:r?"black":"white"}})})}))},A=function(e){var t,n=e.width/2,i=Object(r.useState)(1),l=Object(c.a)(i,2),o=l[0],s=l[1],h=Object(r.useState)(n),f=Object(c.a)(h,2),d=f[0],v=f[1],w=Object(r.useState)(N()),m=Object(c.a)(w,2),g=m[0],k=m[1];Object(r.useEffect)(function(){if(null!==g)return t=setInterval(function(){return y(1)},200),function(){return clearInterval(t)}},[o,d]);var y=function(i){null!==g&&(g.canMoveDown(e.grid,d,o)?s(o+i):(console.debug("Cant move down"),setTimeout(function(){return e.storePiece(g,d,o),s(1),v(n),void(null!==e.grid[1][n]||null!==e.grid[1][n-1]?(console.log("Game over"),clearInterval(t),k(null)):k(N()))},100)))},b=function(t){null!==g&&("Left"===t&&d>1&&g.checkLeft(e.grid,d,o)?v(d-1):"Right"===t&&d<=10-g.width&&g.checkRight(e.grid,d,o)&&v(d+1))};return Object(r.useEffect)(function(){var t=function(t){switch(t.key){case"ArrowUp":g&&g.rotateClockwise(e.grid,d,o,v);break;case"ArrowDown":y(1);break;case"ArrowRight":b("Right");break;case"ArrowLeft":b("Left")}};return window.addEventListener("keydown",t),function(){return window.removeEventListener("keydown",t)}}),a.a.createElement("div",{className:u.gridContainer},new Array(e.width*e.height).fill(null).map(function(e,t){return a.a.createElement("div",{key:t,className:u.hiddenCell})}),g?a.a.createElement(C,{row:o,column:d,direction:0,piece:g}):null)};function N(){return new g}var P=function(e){var t=Object(r.useState)(new Array(e.height).fill(null).map(function(){return new Array(e.width).fill(null)})),n=Object(c.a)(t,2),i=n[0],l=n[1];return a.a.createElement("div",{className:u.container},a.a.createElement(j,{grid:i}),a.a.createElement(A,Object.assign({},e,{grid:i,storePiece:function(t,n,r){null!==t&&l(function(e,t){return e.reduce(function(e,n){if(n.every(function(e){return null!==e})){var i=e.slice();return i.unshift(new Array(t).fill(null)),i}return e.push(n),e},[])}(t.storeOnGrid(i,n,r),e.width))}})))},R=n(9),L=function(){return a.a.createElement("div",{className:R.container},a.a.createElement("h1",{className:R.title},"Tetris"),a.a.createElement(P,{width:10,height:20}))};n(21),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},3:function(e,t,n){e.exports={OPiece:"Pieces_OPiece__2GCiu",IPieceHorizontal:"Pieces_IPieceHorizontal__1jyCq",IPieceVertical:"Pieces_IPieceVertical__1qQZB",JPieceHorizontal:"Pieces_JPieceHorizontal__3hNY1",JPieceVertical:"Pieces_JPieceVertical__1kWYM"}},9:function(e,t,n){e.exports={container:"Tetris_container__30ESf",title:"Tetris_title__2UrXg"}}},[[12,2,1]]]);
//# sourceMappingURL=main.8528f501.chunk.js.map